@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}
@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager




<!-- Statistikpaneler -->
<section class="page-section bg-light mt-5" id="dashboard">
    <div class="container">
        <div class="row justify-content-center text-center">
            <div class="col-md-4 mb-4">
                <div class="card text-white bg-primary">
                    <div class="card-body">
                        <h5 class="card-title">Antal Kunder</h5>
                        <p class="card-text">@Model.Statistics.TotalCustomers kunder registrerade.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card text-white bg-success">
                    <div class="card-body">
                        <h5 class="card-title">Antal Konton</h5>
                        <p class="card-text">@Model.Statistics.TotalAccounts konton öppnade.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card text-white bg-warning">
                    <div class="card-body">
                        <h5 class="card-title">Summa Saldo</h5>
                        <p class="card-text">
                            Totalt saldo: @Model.Statistics.TotalBalancePerCountry.Values.Sum().ToString("C")
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<!-- Statistik per land -->
<section class="page-section bg-white" id="countryStats">
    <div class="container">
        <div class="text-center mb-4">
            <h2 class="section-heading text-uppercase">Statistik per land</h2>
        </div>

        <div class="table-responsive">
            <table class="table table-bordered table-hover">
                <thead class="table-dark text-center">
                    <tr>
                        <th>Land</th>
                        <th>Antal kunder</th>
                        <th>Antal konton</th>
                        <th>Totalt saldo</th>
                    </tr>
                </thead>
                <tbody class="text-center">
                    @foreach (var stat in Model.CountryStats)
                    {
                        <tr>
                            <td>@stat.Country</td>
                            <td>@stat.TotalCustomers</td>
                            <td>@stat.TotalAccounts</td>
                            <td>@stat.TotalBalance.ToString("C")</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</section>


<!-- Sökknapp-->
@if (SignInManager.IsSignedIn(User) && (User.IsInRole("Admin") || User.IsInRole("Cashier")))
{
    <div class="text-center my-4">
        <a class="btn btn-primary btn-lg" href="/Customers/Search">Gå till kundsök</a>
    </div>
}



